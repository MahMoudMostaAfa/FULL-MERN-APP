{
  "version": 3,
  "sources": ["alert.js", "login.js", "mapbox.js", "updateSettings.js", "stripe.js", "index.js"],
  "sourcesContent": ["/* eslint-disable */\r\nconst hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\nexport const showAlert = (type, message) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${message}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n", "/* eslint-disable */\r\n// console.log('Hello from login.js');\r\n\r\nimport { showAlert } from './alert';\r\nexport async function login(email, password) {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: 'http://localhost:3000/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n    if ((res.data.status = 'success')) {\r\n      showAlert('success', 'Logged in successfully!');\r\n      window.location.assign('/');\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n}\r\nexport async function logout() {\r\n  try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: 'http://localhost:3000/api/v1/users/logout',\r\n    });\r\n    if (res.data.status === 'success') location.reload(true);\r\n  } catch (err) {\r\n    console.log(err.response);\r\n    showAlert('error', 'Error logging out! Try again.');\r\n  }\r\n}\r\n", "/* eslint-disable */\r\n// console.log('hello from mapbox.js');\r\nexport const displayMap = (locations) => {\r\n  // const locations = JSON.parse(\r\n  //   document.getElementById('map').dataset.locations,\r\n  // );\r\n\r\n  var map = L.map('map', { zoomControl: false });\r\n\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution:\r\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n  }).addTo(map);\r\n\r\n  const points = [];\r\n  locations.forEach((loc) => {\r\n    points.push([loc.coordinates[1], loc.coordinates[0]]);\r\n    L.marker([loc.coordinates[1], loc.coordinates[0]])\r\n      .addTo(map)\r\n      .bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`, {\r\n        autoClose: false,\r\n      })\r\n      .openPopup();\r\n  });\r\n\r\n  const bounds = L.latLngBounds(points).pad(0.5);\r\n  map.fitBounds(bounds);\r\n\r\n  map.scrollWheelZoom.disable();\r\n  map.touchZoom.disable();\r\n};\r\n", "import { showAlert } from './alert';\r\n\r\nexport async function updateSettings(data, type) {\r\n  const url =\r\n    type === 'password'\r\n      ? 'http://localhost:3000/api/v1/users/updatePassword'\r\n      : 'http://localhost:3000/api/v1/users/updateMe';\r\n  try {\r\n    const res = await axios({\r\n      method: 'PATCH',\r\n      url,\r\n      data,\r\n    });\r\n    if (res.data.status === 'success') {\r\n      showAlert(\r\n        'success',\r\n        `${type == 'password' ? 'password' : 'data'} updated successfully!`,\r\n      );\r\n      window.setTimeout(() => {\r\n        location.reload(true);\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n}\r\n", "import { showAlert } from './alert';\r\nconst stripe = Stripe(\r\n  'pk_test_51QSmqpHFFmsZw6zA5oZNmEgzaMaPhxAZx50Tg3QXCuWvzb7fXx1FIvoLw8fDpXwm1DofUHBxvVI58BYI19TdjvCm00bBEIR84D',\r\n);\r\n\r\nexport async function bookTour(tourId) {\r\n  try {\r\n    const session = await axios(\r\n      `http://localhost:3000/api/v1/bookings/checkout-session/${tourId}`,\r\n    );\r\n    await stripe.redirectToCheckout({\r\n      sessionId: session.data.session.id,\r\n    });\r\n  } catch (err) {\r\n    showAlert('error', err);\r\n  }\r\n}\r\n", "import { login, logout } from './login';\r\nimport { displayMap } from './mapbox';\r\nimport { updateSettings } from './updateSettings';\r\nimport { bookTour } from './stripe';\r\n// console.log('hello from the client side');\r\n\r\nconst spinner = document.getElementById('loading-spinner');\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  console.log('DOM fully loaded and parsed');\r\n  const showSpinner = () => spinner.classList.remove('hidden');\r\n  showSpinner();\r\n  console.log('spinner');\r\n});\r\nconst hideSpinner = () => spinner.classList.add('hidden');\r\nwindow.addEventListener('load', () => {\r\n  setTimeout(hideSpinner, 100);\r\n  // hideSpinner();\r\n  // console.log('hide spinner');\r\n});\r\n\r\nconst mapBox = document.getElementById('map');\r\nconst loginForm = document.querySelector('.form--login');\r\nconst updateUserDataForm = document.querySelector('.form-user-data');\r\nconst updateUserPasswordForm = document.querySelector('.form-user-settings');\r\nconst logoutBtn = document.querySelector('.nav__el--logout');\r\nconst bookBtn = document.getElementById('book-tour');\r\n\r\n// map\r\nif (mapBox) {\r\n  const locations = JSON.parse(\r\n    document.getElementById('map').dataset.locations,\r\n  );\r\n  console.log('dislaping');\r\n  displayMap(locations);\r\n}\r\n\r\n// login\r\nif (loginForm) {\r\n  document.querySelector('.form').addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    login(email, password);\r\n  });\r\n}\r\n\r\nif (logoutBtn) logoutBtn.addEventListener('click', logout);\r\n\r\nif (updateUserDataForm) {\r\n  updateUserDataForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n\r\n    // const email = document.getElementById('email').value;\r\n    form.append('name', document.getElementById('name').value);\r\n    form.append('email', document.getElementById('email').value);\r\n    form.append('photo', document.getElementById('photo').files[0]);\r\n    // console.log(name, email);\r\n    // updateSettings({ name, email });\r\n    console.log(form);\r\n    console.log(form.get('photo'));\r\n    updateSettings(form, 'data');\r\n  });\r\n}\r\nif (updateUserPasswordForm) {\r\n  updateUserPasswordForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    const currentPassword = document.getElementById('password-current').value;\r\n    const newPassword = document.getElementById('password').value;\r\n    const confirmNewPassword =\r\n      document.getElementById('password-confirm').value;\r\n    document.querySelector('.form-user-settings .btn').innerHTML =\r\n      'loading....';\r\n\r\n    await updateSettings(\r\n      { currentPassword, newPassword, confirmNewPassword },\r\n      'password',\r\n    );\r\n    document.getElementById('password-current').value = '';\r\n    document.getElementById('password').value = '';\r\n    document.getElementById('password-confirm').value = '';\r\n    document.querySelector('.form-user-settings .btn').innerHTML =\r\n      'save password';\r\n  });\r\n}\r\n\r\nif (bookBtn) {\r\n  bookBtn.addEventListener('click', (e) => {\r\n    e.target.textContent = 'processing...';\r\n    const { tourId } = e.target.dataset;\r\n    bookTour(tourId);\r\n  });\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
